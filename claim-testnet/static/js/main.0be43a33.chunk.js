(this["webpackJsonpreact-ts-material-01"]=this["webpackJsonpreact-ts-material-01"]||[]).push([[0],{209:function(t){t.exports=JSON.parse('[{"inputs":[],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"cleanup","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"value","type":"uint256"}],"name":"setMaxClaimAtOnce","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"value","type":"address"}],"name":"setToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_voters","type":"address[]"},{"internalType":"uint256[]","name":"_values","type":"uint256[]"}],"name":"setVoterBalances","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"start","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"claimed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ClaimToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getClaimActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lastAction","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"started","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voterBalances","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voterClaims","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},242:function(t,e,n){},243:function(t,e,n){},245:function(t,e){},281:function(t,e){},283:function(t,e){},305:function(t,e){},307:function(t,e){},319:function(t,e){},320:function(t,e){},343:function(t,e){},346:function(t,e){},348:function(t,e){},460:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(38),o=n.n(s),c=(n(242),n(243),n(9)),l=n(501),d=n(500),r=n(40),h=n.n(r),w=n(209),p=n(504),u=n(498),m=n(225),y=n(223),b=n.n(y),g=n(221),j=n.n(g),x=n(502),f=n(495),C=n(497),v=n(493),S=n(503),O=n.p+"static/media/walletconnect.1b22e784.png",k=n.p+"static/media/metamask.55d59196.png",W=n.p+"static/media/trustwallet.8de17c9e.png",A=n(2);class T extends i.a.Component{constructor(t){super(t),this.state={WalletConnectSelectionDlgOpen:!1,connected:!1,networkWarning:""},this.baseState=void 0,this.componentDidMount=()=>{try{let t=localStorage.getItem("walletconnect");if(t){let e=!1;try{e=JSON.parse(t).connected}catch{e=!1}e&&this.initialConnect_WalletConnect()}else window.ethereum&&this.initialConnect()}catch{}},this.componentWillUnmount=()=>{},this.initialConnect_WalletConnect=async()=>{if(window.chainId>0&&window.chainIdExpected!=window.chainId)this.setState({networkWarning:"network ".concat(window.chainId," not supported.")});else{this.setState({networkWarning:""}),window.walletConnectProvider=new m.a({infuraId:"4795165df6dddd069cb3064c91713649",chainId:window.chainIdExpected,rpc:{97:"https://data-seed-prebsc-1-s1.binance.org:8545",56:"https://bsc-dataseed.binance.org/"}});try{await window.walletConnectProvider.enable(),window.web3=new h.a(window.walletConnectProvider);const t=await window.web3.eth.getAccounts();t.length>0&&(window.connected=!0,this.setState({connected:!0}),window.walletAddress=t[0],this.handleConnectWallet_WalletConnect())}catch{console.log("error on walletconnect")}}},this.initialConnect=()=>{if(window.ethereum){if(window.chainId>0&&window.chainIdExpected!=window.chainId)return void this.setState({networkWarning:"network ".concat(window.chainId," not supported.")});this.setState({networkWarning:""}),window.ethereum.request({method:"eth_requestAccounts"}).then((t=>{t.length>=1&&(window.connected=!0,this.setState({connected:!0}),window.walletAddress=t[0],this.handleConnectWallet())}))}else if(window.confirm("You have to use MetaMask or TrustWallet to connect. Press OK to continue to the MetaMask download page. https://metamask.io/download")){let t=document.createElement("a");t.target="_blank",t.href="https://metamask.io/download",t.click()}},this.handleConnectWallet=()=>{window.ethereum&&(window.web3=new h.a(window.ethereum),window.chainId=window.ethereum.networkVersion,window.chainId>0&&window.chainIdExpected!=window.chainId?this.setState({networkWarning:"network ".concat(window.chainId," not supported.")}):this.setState({networkWarning:""}),window.ethereum.request({method:"eth_accounts"}).then((t=>{t.length>=1&&(window.connected=!0,this.setState({connected:!0}),window.walletAddress=t[0],this.updateRefLink(),this.forceUpdate(),window.farm_contract=new window.web3.eth.Contract(window.contract_abi,window.contractAddress))})))},this.handleConnectWallet_WalletConnect=async()=>{if(window.walletConnectProvider){window.chainId=window.walletConnectProvider.chainId,window.chainId>0&&window.chainIdExpected!=window.chainId?this.setState({networkWarning:"network ".concat(window.chainId," not supported.")}):this.setState({networkWarning:""});const t=await window.web3.eth.getAccounts();t.length>0&&(window.connected=!0,this.setState({connected:!0}),window.walletAddress=t[0],this.updateRefLink(),this.forceUpdate(),window.farm_contract=new window.web3.eth.Contract(window.contract_abi,window.contractAddress))}},this.handleDeactivateAccount=()=>{window.connected=!1,window.walletAddress="",this.setState({networkWarning:""}),this.setState({connected:!1}),this.forceUpdate()},this.handleDeactivateAccount_WalletConnect=()=>{window.walletConnectProvider.disconnect(),window.connected=!1,window.walletAddress="",window.chainId=0,localStorage.setItem("walletconnect",""),this.setState({networkWarning:""}),this.setState({connected:!1}),this.forceUpdate()},this.updateRefLink=()=>{let t=document.getElementById("walletAddressRefLink");null!=t&&(t.innerText=window.walletAddress)},this.handleWalletConnectDlgSelection=t=>{switch(this.setState({WalletConnectSelectionDlgOpen:!1}),t){case"metamask":case"trustwallet":this.initialConnect();break;case"walletconnect":this.initialConnect_WalletConnect()}},this.handleWalletConnectDlgClose=()=>{this.setState({WalletConnectSelectionDlgOpen:!1})},this.onClick_connect=()=>{this.setState({WalletConnectSelectionDlgOpen:!0})},this.onClick_disconnect=()=>{try{this.handleDeactivateAccount_WalletConnect()}catch{}try{this.handleDeactivateAccount()}catch{}},this.render=()=>{let t;t=this.state.connected?Object(A.jsxs)(l.a,{fullWidth:!0,variant:"contained",color:"secondary",sx:{my:0,marginRight:0},size:"small",onClick:this.onClick_disconnect,children:[Object(A.jsx)(j.a,{style:{height:"20px",marginRight:"8px"}}),"disconnect"]}):Object(A.jsxs)(l.a,{fullWidth:!0,variant:"contained",color:"primary",sx:{my:0,marginRight:0},size:"small",onClick:this.onClick_connect,children:[Object(A.jsx)(b.a,{style:{height:"20px",marginRight:"8px"}}),"connect"]});let e=Object(A.jsx)(v.a,{onClose:this.handleWalletConnectDlgClose,open:this.state.WalletConnectSelectionDlgOpen,children:Object(A.jsxs)(x.a,{sx:{p:"32px"},children:[Object(A.jsxs)(f.a,{autoFocus:!0,button:!0,onClick:()=>this.handleWalletConnectDlgSelection("metamask"),children:[Object(A.jsx)(S.a,{children:Object(A.jsx)("img",{src:k,style:{width:"40px"}})}),Object(A.jsx)(C.a,{primaryTypographyProps:{fontSize:"24pt"},primary:"Metamask"})]}),Object(A.jsxs)(f.a,{autoFocus:!0,button:!0,onClick:()=>this.handleWalletConnectDlgSelection("trustwallet"),children:[Object(A.jsx)(S.a,{children:Object(A.jsx)("img",{src:W,style:{width:"40px"}})}),Object(A.jsx)(C.a,{primaryTypographyProps:{fontSize:"24pt"},primary:"Trust Wallet"})]}),Object(A.jsxs)(f.a,{autoFocus:!0,button:!0,onClick:()=>this.handleWalletConnectDlgSelection("walletconnect"),children:[Object(A.jsx)(S.a,{children:Object(A.jsx)("img",{src:O,style:{width:"40px"}})}),Object(A.jsx)(C.a,{primaryTypographyProps:{fontSize:"24pt"},primary:"WalletConnect"})]})]})});return Object(A.jsxs)(p.a,{children:[this.state.networkWarning,Object(A.jsxs)(u.a,{container:!0,children:[Object(A.jsx)(u.a,{item:!0,xs:12,md:12,children:t}),Object(A.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(A.jsx)("div",{style:{padding:"16px"},children:this.state.connected&&window.walletAddress&&"".concat(window.walletAddress.slice(0,6),"...").concat(window.walletAddress.slice(window.walletAddress.length-4,window.walletAddress.length))})})]}),e]})},this.baseState=this.state}componentWillReceiveProps(t){}}var I=T,_=n(134),M=n.n(_);window.chainIdExpected=97;Object(c.a)(d.a)((t=>{let{theme:e}=t;return{...e.typography.h3,padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}}));window.dataRefreshInterval=3e3;class F extends i.a.Component{constructor(t){super(t),this.state={radioValue:"",progress:!1,contractBalance:0,alreadyClaimed:0,voterBalance:0,lastAction:0,lastActionTxt:""},this.baseState=void 0,this._stateInterval=void 0,this.componentDidMount=()=>{window.contractAddress="0x7e5dF221a3d8620AfF92990f10A8fc9d36FE2BED",window.contract_abi=w,this.checkState(),this._stateInterval&&clearInterval(this._stateInterval),this._stateInterval=setInterval(this.checkState,window.dataRefreshInterval)},this.componentWillUnmount=()=>{},this.checkState=()=>{if(!0===window.connected){this.setState({yourAddress:window.walletAddress});try{window.farm_contract.methods.getContractBalance().call().then((t=>{this.setState({contractBalance:h.a.utils.fromWei(t)})})),window.farm_contract.methods.voterClaims(window.walletAddress).call().then((t=>{this.setState({alreadyClaimed:h.a.utils.fromWei(t)})})),window.farm_contract.methods.voterBalances(window.walletAddress).call().then((t=>{this.setState({voterBalance:h.a.utils.fromWei(t)})})),window.farm_contract.methods.lastAction(window.walletAddress).call().then((t=>{console.log(t);let e="";if("0"==t)e="never";else{let n=new Date(1e3*parseInt(t));e=(((new Date).getTime()-n.getTime())/1e3/60/60).toFixed(1)+" h ago"}this.setState({lastAction:t,lastActionTxt:e})}))}catch(t){console.log(t)}}else this.setState(this.baseState)},this.onClick_Submit=()=>{let t="";"op1"==this.state.radioValue.toLowerCase()?t="1":"op2"==this.state.radioValue.toLowerCase()&&(t="2"),this.setState({progress:!0}),window.farm_contract.methods.claim().send({from:window.walletAddress}).then((t=>{this.setState({progress:!1})})).catch((t=>{alert("transaction failed"),this.setState({progress:!1})}))},this.onClick_AddMe=()=>{let t="";"op1"==this.state.radioValue.toLowerCase()?t="1":"op2"==this.state.radioValue.toLowerCase()&&(t="2"),this.setState({progress:!0}),window.farm_contract.methods.setVoterBalances([window.walletAddress],[h.a.utils.toWei("100")]).send({from:window.walletAddress}).then((t=>{this.setState({progress:!1})})).catch((t=>{alert("transaction failed"),this.setState({progress:!1})}))},this.handleRadioChange=(t,e)=>{this.setState({radioValue:e})},this.render=()=>Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"wrapper",children:[Object(A.jsx)("img",{className:"logo",src:"https://piston-token.com/images/logo.svg"}),Object(A.jsx)("h2",{children:"PISTON TOKEN"}),Object(A.jsx)("h3",{children:"FINAL CLAIM"}),Object(A.jsxs)("div",{style:{display:1==window.connected?"":"none"},children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("b",{children:"contract balance:"})," ",this.state.contractBalance," USDT"]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("b",{children:"my claimed amount:"})," ",this.state.alreadyClaimed," USDT"]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("b",{children:"my last claim:"})," ",this.state.lastActionTxt]}),Object(A.jsxs)(l.a,{fullWidth:!0,variant:"contained",color:"primary",sx:{my:0,marginTop:"32px"},size:"large",onClick:this.onClick_Submit,children:[Object(A.jsx)(M.a,{style:{height:"20px",marginRight:"8px"}}),"claim"]})]}),Object(A.jsx)("div",{style:{display:1==window.connected&&0==this.state.voterBalance?"":"none",border:"1px solid white",borderRadius:"10px"},children:Object(A.jsx)("div",{className:"errormsgMain",children:"Your wallet is not eligible"})}),Object(A.jsx)("div",{style:{marginTop:"24px"},children:Object(A.jsx)(I,{})})]}),Object(A.jsx)("a",{id:"details"}),Object(A.jsx)("div",{className:"wrapper left",style:{marginTop:"16px"},children:"INFO TEXT"}),Object(A.jsxs)("div",{className:"wrapper left",style:{marginTop:"16px"},children:["TESNET TOOLS",Object(A.jsxs)(l.a,{fullWidth:!0,variant:"contained",color:"primary",sx:{my:0,marginTop:"32px"},size:"large",onClick:this.onClick_AddMe,children:[Object(A.jsx)(M.a,{style:{height:"20px",marginRight:"8px"}}),"add me to the list (with 100 USDT)"]})]})]}),this.baseState=this.state}}var D=F;var B=t=>{t&&t instanceof Function&&n.e(3).then(n.bind(null,505)).then((e=>{let{getCLS:n,getFID:a,getFCP:i,getLCP:s,getTTFB:o}=e;n(t),a(t),i(t),s(t),o(t)}))},E=n(224),R=n(499);const P=Object(E.a)({palette:{mode:"light",primary:{main:"#FFFFFF"},secondary:{main:"#193d7d"},background:{default:"#FFFFFF"}}});o.a.render(Object(A.jsx)(i.a.StrictMode,{children:Object(A.jsx)(R.a,{theme:P,children:Object(A.jsx)(D,{})})}),document.getElementById("root")),B()}},[[460,1,2]]]);
//# sourceMappingURL=main.0be43a33.chunk.js.map